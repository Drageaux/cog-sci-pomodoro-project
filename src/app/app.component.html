<h2>{{ title }}</h2>
<main class="text-white">
  <br />
  <!-- Settings -->
  <header>
    <div class="row settings" [class.hide]="sessionRunning">
      <div class="break col-12">
        <p>BREAK LENGTH</p>
        <button (click)="timerPaused && breakIncrement(-1)" class="minus">
          -
        </button>
        <span class="time">{{ breakLength }}</span>
        <button (click)="timerPaused && breakIncrement(1)" class="plus">
          +
        </button>
      </div>
      <div class="session col-12">
        <p>SESSION LENGTH</p>
        <button (click)="timerPaused && sessionIncrement(-1)" class="minus">
          -
        </button>
        <span class="time">{{ sessionLength }}</span>
        <button (click)="timerPaused && sessionIncrement(1)" class="plus">
          +
        </button>
      </div>

      <form class="col-12">
        <input
          type="text"
          placeholder="(Enter task name)"
          [(ngModel)]="currTaskName"
          [ngModelOptions]="{ standalone: true }"
        />
      </form>
    </div>
  </header>

  <!-- Timer Button -->
  <section class="container mx-auto mt-2 row">
    <div class="col-12">
      <div class="timer" (click)="timerStartPause()">
        <div *ngIf="!timerPaused">
          <p class="title">{{ sessionType }}</p>
          <p>
            {{ timeRemainingRendered }}
          </p>
          <span
            [style.height]="fillHeight + '%'"
            [style.background]="fillColor"
            class="fill"
          ></span>
        </div>
        <div
          *ngIf="sessionRunning && timerPaused"
          style="
             {
              margin-top: 50%;
            }
          "
        >
          <!-- TODO: play button here -->
          Resume
        </div>
      </div>
    </div>
    <div *ngIf="currSession" class="row col-12 mt-4">
      <div class="col-6">{{ currSession | json }}</div>
      <div class="col-6">
        <button (click)="wrapUpSession()" class="btn btn-md btn-success">
          Wrap up Session early
        </button>
      </div>
    </div>
  </section>

  <!-- Result -->
  <section class="mt-5">
    <div class="col-12 table-responsive">
      <table class="table text-white">
        <thead>
          <th scope="col">#</th>
          <th scope="col">Task Name</th>
          <th scope="col">Session Length</th>
          <th scope="col">Break Length</th>
          <th scope="col">Focus</th>
          <th scope="col">Stress</th>
          <th scope="col">Productivity</th>
        </thead>
        <tbody>
          <tr *ngFor="let sesh of sessions; let i = index">
            <td>Session {{ i + 1 }} {{ sesh | json }}</td>
            <td>{{ sesh.taskName }}</td>
            <td>
              {{ renderTimeHmmss(sesh.sessionElapsedTime) }}
            </td>
            <td>
              {{ renderTimeHmmss(sesh.breakElapsedTime) }}
            </td>
            <td>
              {{ sesh.focusLevel }}
            </td>
            <td>
              {{ sesh.stressLevel }}
            </td>
            <td>
              {{ sesh.productivityLevel }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>
</main>
